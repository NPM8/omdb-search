(this["webpackJsonpomdb-search"]=this["webpackJsonpomdb-search"]||[]).push([[0],{108:function(e,t,r){},120:function(e,t,r){},121:function(e,t,r){},122:function(e,t,r){"use strict";r.r(t);var n=r(14),a=r(0),c=r.n(a),o=r(20),s=r.n(o),i=(r(108),r(38)),u=r.n(i),l=r(51),j=r(72),h=r(125),d=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.omdbapi.com/?apikey=".concat("ac6b6e43","&s=").concat(t,"&page=").concat(r.toString()));case 2:return n=e.sent,e.next=5,n.json();case 5:if("True"!==(a=e.sent).Response){e.next=8;break}return e.abrupt("return",{Search:a.Search,totalResults:a.totalResults});case 8:throw new Error(a.Error);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b=r(126).a.Search,p=function(e){var t=e.onSearch;return Object(n.jsx)("div",{children:Object(n.jsx)(b,{placeholder:"title",onSearch:t,enterButton:!0})})},v=r(124),f=h.a.Text,m=h.a.Paragraph,O=function(e){var t=e.movies,r=e.loadMore;return Object(n.jsx)(v.b,{size:"large",itemLayout:"vertical",dataSource:t,loadMore:r,rowKey:function(e){return e.Title},renderItem:function(e){return Object(n.jsxs)(v.b.Item,{extra:Object(n.jsx)("img",{src:e.Poster,width:150,alt:"Poster"}),children:[Object(n.jsx)(v.b.Item.Meta,{title:e.Title}),Object(n.jsxs)(m,{children:[Object(n.jsx)(f,{strong:!0,children:"Year"}),": ",e.Year]}),Object(n.jsxs)(m,{children:[Object(n.jsx)(f,{strong:!0,children:"Type"}),": ",e.Type]})]})}})},x=r(96),g=(r(120),function(e){var t=e.onLoad,r=e.hasMore,a=e.loading;return r&&!a?Object(n.jsx)("div",{className:"load-more",children:Object(n.jsx)(x.a,{onClick:t,children:"Load more"})}):Object(n.jsx)(n.Fragment,{})}),y=r(79),w=r(58),S="NEW_SEARCH",k="ADD_MOVIE",L=function(e,t,r){return{type:S,payload:{movies:e,total:t,query:r}}},T={movies:[],total:0,query:"",page:1,refetchingLoding:!1,searchLoding:!1},M=function(e,t){var r=t.type,n=t.payload;switch(r){case S:return Object(w.a)(Object(w.a)({},e),{},{movies:n.movies,total:n.total,query:n.query,page:2});case k:return Object(w.a)(Object(w.a)({},e),{},{movies:[].concat(Object(y.a)(e.movies),Object(y.a)(n.movies)),page:e.page+1});default:throw new Error("no default action")}},E=(r(121),h.a.Title),I=function(){var e=function(){var e=Object(a.useReducer)(M,T),t=Object(j.a)(e,2);return[t[0],t[1]]}(),t=Object(j.a)(e,2),r=t[0],c=t[1],o=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(t,1);case 3:n=e.sent,c(L(n.Search,n.totalResults,t)),console.log(r.movies),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(r.query,r.page);case 3:t=e.sent,c((n=t.Search,{type:k,payload:{movies:n}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"site-layout-content",children:[Object(n.jsx)(E,{children:"Search a movie"}),Object(n.jsx)(p,{onSearch:o}),Object(n.jsx)(O,{movies:r.movies,loadMore:Object(n.jsx)(g,{loading:r.refetchingLoding,hasMore:r.total>r.movies.length,onLoad:s})})]})},R=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,127)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))};s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root")),R()}},[[122,1,2]]]);
//# sourceMappingURL=main.13623178.chunk.js.map