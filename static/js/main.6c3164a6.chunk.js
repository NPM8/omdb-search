(this["webpackJsonpomdb-search"]=this["webpackJsonpomdb-search"]||[]).push([[0],{112:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var r=n(14),a=n(0),c=n.n(a),o=n(20),i=n.n(o),s=(n(112),n(39)),u=n.n(s),l=n(53),d=n(60),j=n(129),h=n(99),b=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.omdbapi.com/?apikey=".concat("ac6b6e43","&s=").concat((c=t,c.split("&").join("%26").split(" ").join("+")),"&page=").concat(n.toString()));case 2:return r=e.sent,e.next=5,r.json();case 5:if("True"!==(a=e.sent).Response){e.next=8;break}return e.abrupt("return",{Search:a.Search,totalResults:a.totalResults});case 8:throw new Error(a.Error);case 9:case"end":return e.stop()}var c}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=n(130).a.Search,g=function(e){var t=e.onSearch,n=e.loading;return Object(r.jsx)("div",{children:Object(r.jsx)(p,{placeholder:"Title",loading:n,onSearch:t,enterButton:!0})})},O=n(128),f=j.a.Text,m=j.a.Paragraph,v=j.a.Link,x=function(e){var t=e.movies,n=e.loadMore,a=e.loading;return Object(r.jsx)(O.b,{size:"large",itemLayout:"vertical",dataSource:t,loading:a,loadMore:n,rowKey:function(e){return e.Title},renderItem:function(e){return Object(r.jsxs)(O.b.Item,{extra:Object(r.jsx)("img",{src:e.Poster,width:150,alt:"Poster"}),children:[Object(r.jsx)(O.b.Item.Meta,{title:Object(r.jsx)(v,{href:"https://www.imdb.com/title/".concat(e.imdbID,"/"),children:e.Title})}),Object(r.jsxs)(m,{children:[Object(r.jsx)(f,{strong:!0,children:"Year"}),": ",e.Year]}),Object(r.jsxs)(m,{children:[Object(r.jsx)(f,{strong:!0,children:"Type"}),": ",e.Type]})]})}})},w=n(100),y=(n(124),function(e){var t=e.onLoad,n=e.hasMore,a=e.loading;return n?Object(r.jsx)("div",{className:"load-more",children:Object(r.jsx)(w.a,{loading:a,onClick:t,children:"Load more"})}):Object(r.jsx)(r.Fragment,{})}),L=n(82),S=n(29),T="START_LOADING",k="START_REFETCHING",E="STOP_LOADING",I="STOP_REFETCHING",R="NEW_SEARCH",M="ADD_MOVIE",N=function(e,t,n){return{type:R,payload:{movies:e,total:t,query:n}}},C={movies:[],total:0,query:"",page:1,refetchingLoding:!1,searchLoding:!1},F=function(e,t){var n=t.type,r=t.payload;switch(n){case T:return Object(S.a)(Object(S.a)({},e),{},{searchLoding:!0});case E:return Object(S.a)(Object(S.a)({},e),{},{searchLoding:!1});case k:return Object(S.a)(Object(S.a)({},e),{},{refetchingLoding:!0});case I:return Object(S.a)(Object(S.a)({},e),{},{refetchingLoding:!1});case R:return Object(S.a)(Object(S.a)({},e),{},{movies:r.movies,total:r.total,query:r.query,page:2,searchLoding:!1});case M:return Object(S.a)(Object(S.a)({},e),{},{movies:[].concat(Object(L.a)(e.movies),Object(L.a)(r.movies)),page:e.page+1,refetchingLoding:!1});default:throw new Error("no default action")}},P=(n(125),j.a.Title),A=function(){var e=function(){var e=Object(a.useReducer)(F,C),t=Object(d.a)(e,2);return[t[0],t[1]]}(),t=Object(d.a)(e,2),n=t[0],c=t[1],o=h.a.useNotification(),i=Object(d.a)(o,2),s=i[0],j=i[1],p=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:T}),e.next=4,b(t,1);case 4:n=e.sent,c(N(n.Search,n.totalResults,t)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:E}),s.error({message:"Something went wrong",description:e.t0.message,placement:"topLeft"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:k}),e.next=4,b(n.query,n.page);case 4:t=e.sent,c((r=t.Search,{type:M,payload:{movies:r}})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:I}),s.error({message:"Something went wrong",description:e.t0.message,placement:"topLeft"});case 12:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"site-layout-content",children:[j,Object(r.jsx)(P,{children:"Search a movie"}),Object(r.jsx)(g,{onSearch:p,loading:n.searchLoding}),Object(r.jsx)(x,{loading:n.searchLoding,movies:n.movies,loadMore:Object(r.jsx)(y,{loading:n.refetchingLoding,hasMore:n.total>n.movies.length,onLoad:O})})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(A,{})}),document.getElementById("root")),D()}},[[126,1,2]]]);
//# sourceMappingURL=main.6c3164a6.chunk.js.map